<!DOCTYPE html>
<html lang="pt-BR" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Sistema de Gestão BIOMA Uberaba v4.0 - Sistema Completo e Melhorado">
    <meta name="author" content="Juan Marco (@juanmarco1999)">
    <title>BIOMA Uberaba v4.0 - Sistema Profissional Melhorado</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🌳</text></svg>">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
:root[data-theme="light"]{
    --primary:#7C3AED;
    --primary-dark:#6D28D9;
    --secondary:#EC4899;
    --accent:#F59E0B;
    --success:#10B981;
    --danger:#EF4444;
    --warning:#F59E0B;
    --info:#3B82F6;
    --bg-main:#F9FAFB;
    --bg-card:#FFFFFF;
    --bg-sidebar:#1F2937;
    --bg-sidebar-hover:#374151;
    --text-primary:#1F2937;
    --text-secondary:#6B7280;
    --text-muted:#9CA3AF;
    --border-color:#E5E7EB;
    --shadow:0 4px 20px rgba(0,0,0,0.08);
    --shadow-hover:0 8px 30px rgba(124,58,237,0.15);
}

:root[data-theme="dark"]{
    --primary:#8B5CF6;
    --primary-dark:#7C3AED;
    --secondary:#F472B6;
    --accent:#FBBF24;
    --success:#34D399;
    --danger:#F87171;
    --warning:#FBBF24;
    --info:#60A5FA;
    --bg-main:#0F172A;
    --bg-card:#1E293B;
    --bg-sidebar:#0F172A;
    --bg-sidebar-hover:#1E293B;
    --text-primary:#F1F5F9;
    --text-secondary:#CBD5E1;
    --text-muted:#94A3B8;
    --border-color:#334155;
    --shadow:0 4px 20px rgba(0,0,0,0.4);
    --shadow-hover:0 8px 30px rgba(139,92,246,0.3)
}

*{margin:0;padding:0;box-sizing:border-box;transition:background-color .3s ease,color .3s ease,border-color .3s ease}
body{font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:var(--bg-main);color:var(--text-primary);overflow-x:hidden;line-height:1.6}

/* Auth Screen Styles */
.auth-screen{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);padding:20px;animation:gradientAnimation 15s ease infinite;background-size:400% 400%}
@keyframes gradientAnimation{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
.auth-box{background:rgba(255,255,255,0.98);backdrop-filter:blur(10px);border-radius:30px;padding:50px;max-width:500px;width:100%;box-shadow:0 30px 80px rgba(0,0,0,0.4);animation:slideUp 0.6s cubic-bezier(0.68,-0.55,0.265,1.55)}
@keyframes slideUp{from{opacity:0;transform:translateY(50px) scale(0.9)}to{opacity:1;transform:translateY(0) scale(1)}}
.auth-logo{text-align:center;margin-bottom:40px}
.auth-logo .logo-icon{font-size:5rem;background:linear-gradient(135deg,#7C3AED,#EC4899);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;animation:pulse 2s ease-in-out infinite;filter:drop-shadow(0 5px 15px rgba(124,58,237,0.3))}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
.auth-logo h2{font-weight:900;font-size:2.8rem;color:#1F2937;margin-top:20px;letter-spacing:2px}
.auth-logo p{color:#6B7280;font-size:1.1rem;margin-top:10px;font-weight:500}

/* Navigation Pills */
.nav-pills .nav-link{border-radius:15px;font-weight:700;padding:12px 25px;transition:all .3s;color:#6B7280;border:none;background:transparent;cursor:pointer}
.nav-pills .nav-link.active{background:linear-gradient(135deg,#7C3AED,#6D28D9);color:white;box-shadow:0 5px 20px rgba(124,58,237,0.4);transform:translateY(-2px)}

/* Form Controls */
.form-control,.form-select{border-radius:12px;border:2px solid #E5E7EB;padding:12px 18px;font-size:1rem;transition:all .3s;background:white;color:#1F2937}
.form-control:focus,.form-select:focus{border-color:#7C3AED;box-shadow:0 0 0 5px rgba(124,58,237,0.1);outline:none;background:white}

/* Alerts */
.alert{border-radius:15px;border:none;padding:15px 20px}
.alert-info{background:linear-gradient(135deg,#E0E7FF,#DBEAFE);color:#1E40AF;border-left:5px solid #3B82F6}
.alert-success{background:linear-gradient(135deg,#D1FAE5,#A7F3D0);color:#065F46;border-left:5px solid #10B981}
.alert-warning{background:linear-gradient(135deg,#FEF3C7,#FDE68A);color:#92400E;border-left:5px solid #F59E0B}
.alert-danger{background:linear-gradient(135deg,#FEE2E2,#FECACA);color:#991B1B;border-left:5px solid #EF4444}

/* Buttons */
.btn{border-radius:12px;padding:12px 30px;font-weight:700;border:none;cursor:pointer;transition:all .3s ease;display:inline-flex;align-items:center;gap:10px;font-size:1rem;text-transform:uppercase;letter-spacing:0.5px}
.btn i{font-size:1.2rem}
.btn-primary{background:linear-gradient(135deg,var(--primary),var(--primary-dark));color:#fff;box-shadow:0 5px 20px rgba(124,58,237,0.3)}
.btn-primary:hover{transform:translateY(-3px);box-shadow:0 10px 30px rgba(124,58,237,0.5);color:#fff}
.btn-success{background:linear-gradient(135deg,var(--success),#059669);color:#fff}
.btn-success:hover{transform:translateY(-3px);color:#fff}
.btn-danger{background:linear-gradient(135deg,var(--danger),#DC2626);color:#fff}
.btn-outline{background:transparent;color:var(--primary);border:3px solid var(--primary)}
.btn-outline:hover{background:var(--primary);color:#fff}
.btn-secondary{background:#6B7280;color:#fff}
.btn-sm{padding:8px 16px;font-size:0.85rem}

/* Sidebar */
.sidebar{width:280px;background:var(--bg-sidebar);color:#fff;position:fixed;height:100vh;overflow-y:auto;z-index:1000;box-shadow:4px 0 25px rgba(0,0,0,0.2);transition:transform 0.3s ease}
.sidebar::-webkit-scrollbar{width:8px}
.sidebar::-webkit-scrollbar-track{background:rgba(255,255,255,0.05)}
.sidebar::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.2);border-radius:4px}
.sidebar-logo{padding:30px 20px;text-align:center;background:linear-gradient(135deg,var(--primary),var(--secondary));border-bottom:5px solid var(--accent)}
.sidebar-logo h1{font-size:2.5rem;font-weight:900;letter-spacing:5px;margin:0;text-shadow:2px 2px 8px rgba(0,0,0,0.3)}
.sidebar-logo p{font-size:1rem;opacity:0.95;margin:10px 0 0 0;letter-spacing:2px}

/* Sidebar Menu */
.sidebar-menu{list-style:none;padding:20px 0}
.sidebar-menu li a{display:flex;align-items:center;gap:12px;padding:14px 20px;color:rgba(255,255,255,0.85);text-decoration:none;transition:all .3s;border-left:5px solid transparent;font-weight:500;font-size:0.95rem}
.sidebar-menu li a i{font-size:1.3rem;width:25px}
.sidebar-menu li a:hover{background:var(--bg-sidebar-hover);color:#fff;border-left-color:var(--accent);padding-left:28px}
.sidebar-menu li a.active{background:var(--bg-sidebar-hover);color:#fff;border-left-color:var(--primary);font-weight:700}

/* User Profile in Sidebar */
.sidebar-user-profile{padding:20px;border-top:1px solid rgba(255,255,255,0.1);text-align:center}
.sidebar-user-profile img{width:60px;height:60px;border-radius:50%;margin-bottom:10px;border:3px solid var(--primary)}
.sidebar-user-profile .user-name{font-weight:700;font-size:1rem}
.sidebar-user-profile .user-role{font-size:0.85rem;color:rgba(255,255,255,0.7);margin-top:5px}
.sidebar-user-profile .badge-role{display:inline-block;padding:4px 12px;border-radius:20px;font-size:0.75rem;font-weight:700;margin-top:8px}
.badge-role.admin{background:linear-gradient(135deg,#EF4444,#DC2626);color:#fff}
.badge-role.gestao{background:linear-gradient(135deg,#F59E0B,#D97706);color:#fff}
.badge-role.profissional{background:linear-gradient(135deg,#10B981,#059669);color:#fff}

/* Theme Toggle */
.theme-toggle{padding:15px 20px;border-top:1px solid rgba(255,255,255,0.1)}
.theme-toggle button{width:100%;padding:12px;background:rgba(255,255,255,0.1);border:2px solid rgba(255,255,255,0.2);border-radius:12px;color:#fff;font-weight:600;cursor:pointer;transition:all .3s;display:flex;align-items:center;justify-content:center;gap:10px}

/* Main Content */
.main-content{margin-left:280px;padding:30px 40px 100px;min-height:100vh;overflow-y:auto;overflow-x:hidden}
.main-content::-webkit-scrollbar{width:10px}
.main-content::-webkit-scrollbar-track{background:var(--bg-main)}
.main-content::-webkit-scrollbar-thumb{background:var(--primary);border-radius:5px}

/* Content Sections */
.content-section{display:none;animation:fadeIn 0.4s ease}
.content-section.active{display:block}
@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}

/* Page Header */
.page-header{margin-bottom:30px;padding-bottom:20px;border-bottom:3px solid var(--border-color);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:20px}
.page-header h1{font-size:2.2rem;font-weight:900;background:linear-gradient(135deg,var(--primary),var(--secondary));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;margin:0;display:flex;align-items:center;gap:15px}

/* Sub-tabs Navigation */
.sub-tabs{display:flex;gap:10px;margin-bottom:25px;padding:15px;background:var(--bg-card);border-radius:20px;box-shadow:var(--shadow);overflow-x:auto;flex-wrap:nowrap}
.sub-tabs::-webkit-scrollbar{height:6px}
.sub-tabs::-webkit-scrollbar-track{background:var(--bg-main);border-radius:10px}
.sub-tabs::-webkit-scrollbar-thumb{background:var(--primary);border-radius:10px}
.sub-tab-btn{padding:10px 20px;border:none;background:transparent;color:var(--text-secondary);font-weight:600;border-radius:12px;cursor:pointer;transition:all 0.3s;white-space:nowrap;display:flex;align-items:center;gap:8px}
.sub-tab-btn:hover{background:var(--bg-main);color:var(--primary);transform:translateY(-2px)}
.sub-tab-btn.active{background:linear-gradient(135deg,var(--primary),var(--primary-dark));color:#fff;box-shadow:0 4px 15px rgba(124,58,237,0.3)}
.sub-tab-content{display:none;animation:fadeIn 0.3s ease}
.sub-tab-content.active{display:block}

/* Stat Cards */
.stat-card{background:var(--bg-card);border-radius:20px;padding:30px;box-shadow:var(--shadow);transition:all .3s;text-align:center;position:relative;overflow:hidden;border:2px solid var(--border-color)}
.stat-card::before{content:'';position:absolute;top:0;left:0;width:100%;height:6px;background:linear-gradient(90deg,var(--primary),var(--secondary))}
.stat-card:hover{transform:translateY(-10px);box-shadow:var(--shadow-hover);border-color:var(--primary)}
.stat-card .icon{width:70px;height:70px;border-radius:18px;display:flex;align-items:center;justify-content:center;font-size:2rem;margin:0 auto 15px;background:linear-gradient(135deg,var(--primary),var(--primary-dark));color:#fff;box-shadow:0 10px 25px rgba(124,58,237,0.3)}
.stat-card h3{font-size:3rem;font-weight:900;margin:15px 0 10px;background:linear-gradient(135deg,var(--primary),var(--secondary));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}
.stat-card p{color:var(--text-secondary);font-size:1rem;font-weight:700;margin:0;text-transform:uppercase;letter-spacing:1px}

/* Cards */
.card{background:var(--bg-card);border-radius:20px;box-shadow:var(--shadow);margin-bottom:30px;overflow:visible;transition:all .3s;border:2px solid var(--border-color)}
.card-header{background:linear-gradient(135deg,var(--primary),var(--primary-dark));color:#fff;padding:20px 30px;font-weight:800;font-size:1.2rem;display:flex;align-items:center;gap:12px;border-radius:18px 18px 0 0}
.card-body{padding:30px}

/* Tables */
table{width:100%;border-collapse:collapse;font-size:0.95rem}
table thead th{background:linear-gradient(135deg,var(--primary),var(--primary-dark));color:#fff;padding:16px 14px;text-align:left;font-weight:800;text-transform:uppercase;letter-spacing:0.5px;font-size:0.85rem}
table tbody tr{border-bottom:2px solid var(--border-color);transition:all .2s}
table tbody tr:hover{background:var(--bg-main);transform:scale(1.01)}
table tbody td{padding:16px 14px;vertical-align:middle;color:var(--text-primary)}

/* Badges */
.badge{padding:8px 16px;border-radius:20px;font-weight:800;font-size:0.8rem;display:inline-block;text-transform:uppercase;letter-spacing:0.5px}
.badge.success{background:linear-gradient(135deg,var(--success),#059669);color:#fff}
.badge.warning{background:linear-gradient(135deg,var(--warning),#F59E0B);color:#000}
.badge.danger{background:linear-gradient(135deg,var(--danger),#DC2626);color:#fff}
.badge.info{background:linear-gradient(135deg,var(--info),#2563EB);color:#fff}
.badge.neutral{background:var(--bg-main);color:var(--text-primary);border:2px solid var(--border-color)}

/* Loading */
.spinner{border:4px solid var(--border-color);border-top:4px solid var(--primary);border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite;margin:20px auto}
@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.loading-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);display:flex;align-items:center;justify-content:center;z-index:99999;backdrop-filter:blur(5px)}
.loading-content{background:var(--bg-card);padding:40px;border-radius:20px;text-align:center;box-shadow:0 15px 50px rgba(0,0,0,0.5)}
.loading-spinner-large{border:6px solid var(--border-color);border-top:6px solid var(--primary);border-radius:50%;width:60px;height:60px;animation:spin 1s linear infinite;margin:0 auto 20px}

/* Notification Badge */
.notification-badge{position:absolute;top:-5px;right:-5px;background:var(--danger);color:#fff;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:0.7rem;font-weight:900;animation:pulse 2s infinite}

/* Financeiro Section Styles */
.financeiro-card{background:var(--bg-card);border-radius:20px;padding:25px;box-shadow:var(--shadow);margin-bottom:20px;border:2px solid var(--border-color)}
.financeiro-card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:15px;border-bottom:2px solid var(--border-color)}
.financeiro-card-title{font-size:1.3rem;font-weight:800;color:var(--primary)}
.financeiro-stat{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid var(--border-color)}
.financeiro-stat:last-child{border-bottom:none}
.financeiro-stat-label{color:var(--text-secondary);font-weight:600}
.financeiro-stat-value{font-size:1.2rem;font-weight:800;color:var(--text-primary)}
.financeiro-stat-value.positive{color:var(--success)}
.financeiro-stat-value.negative{color:var(--danger)}

/* Improved Community Section */
.community-container{padding:30px;background:var(--bg-card);border-radius:25px;box-shadow:var(--shadow)}
.community-header{text-align:center;margin-bottom:40px}
.community-header h2{font-size:2.5rem;font-weight:900;background:linear-gradient(135deg,var(--primary),var(--secondary));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:15px}
.community-header p{color:var(--text-secondary);font-size:1.1rem}
.community-stats{display:flex;justify-content:center;gap:30px;flex-wrap:wrap;margin-top:25px}
.community-stat-item{display:flex;align-items:center;gap:10px;padding:12px 24px;background:var(--bg-main);border-radius:30px;border:2px solid var(--border-color)}
.community-stat-item i{font-size:1.5rem;color:var(--primary)}
.community-stat-item span{font-weight:700;color:var(--text-primary)}
.community-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:25px;margin-top:30px}
.community-card{background:var(--bg-main);border-radius:20px;padding:30px;border:2px solid var(--border-color);transition:all 0.3s}
.community-card:hover{transform:translateY(-5px);box-shadow:var(--shadow-hover);border-color:var(--primary)}
.community-card h5{font-size:1.3rem;font-weight:800;color:var(--primary);margin-bottom:15px;display:flex;align-items:center;gap:10px}
.community-card p{color:var(--text-secondary);margin-bottom:20px;line-height:1.6}
.community-card ul{list-style:none;padding-left:0}
.community-card ul li{padding:8px 0;color:var(--text-primary);display:flex;align-items:center;gap:10px}
.community-card ul li::before{content:'✓';color:var(--success);font-weight:900}

/* Mobile Responsive */
@media (max-width: 768px) {
    .sidebar{transform:translateX(-100%);position:fixed}
    .sidebar.active{transform:translateX(0)}
    .main-content{margin-left:0;padding:20px}
    .page-header{flex-direction:column;align-items:flex-start}
    .sub-tabs{flex-wrap:wrap}
    .stat-card h3{font-size:2rem}
    .community-grid{grid-template-columns:1fr}
    .mobile-menu-toggle{display:block;position:fixed;top:20px;left:20px;z-index:1001;background:var(--primary);color:#fff;border:none;padding:10px;border-radius:10px;cursor:pointer}
}

/* Utility Classes */
.w-100{width:100%}
.text-center{text-align:center}
.text-muted{color:var(--text-secondary)}
.text-success{color:var(--success)}
.text-danger{color:var(--danger)}
.text-warning{color:var(--warning)}
.text-info{color:var(--info)}
.mt-3{margin-top:1rem}
.mb-3{margin-bottom:1rem}
.d-flex{display:flex}
.gap-2{gap:0.5rem}
.gap-3{gap:1rem}
.row{display:flex;flex-wrap:wrap;margin:0 -15px}
.row.g-4>*{padding:0 15px;margin-bottom:25px}
[class^="col-"]{padding:0 15px}
.col-12{width:100%}
@media (min-width:768px){
    .col-md-6{width:50%}
    .col-md-4{width:33.333%}
    .col-md-3{width:25%}
}
@media (min-width:992px){
    .col-lg-3{width:25%}
    .col-lg-4{width:33.333%}
    .col-lg-6{width:50%}
}
    </style>
</head>
<body>

<!-- Loading Screen -->
<div id="loadingScreen" class="loading-overlay" style="display:none;">
    <div class="loading-content">
        <div class="loading-spinner-large"></div>
        <h3 style="color:var(--primary);">Carregando...</h3>
    </div>
</div>

<!-- Auth Screen -->
<div id="authScreen" class="auth-screen" style="display:none;">
    <div class="auth-box">
        <div class="auth-logo">
            <div class="logo-icon">🌳</div>
            <h2>BIOMA</h2>
            <p>Sistema de Gestão v4.0</p>
        </div>
        
        <ul class="nav nav-pills nav-fill mb-4">
            <li class="nav-item">
                <button class="nav-link active" onclick="toggleAuthTab('login')">Login</button>
            </li>
            <li class="nav-item">
                <button class="nav-link" onclick="toggleAuthTab('register')">Cadastrar</button>
            </li>
        </ul>
        
        <div id="loginForm">
            <form onsubmit="handleLogin(event)">
                <div class="mb-3">
                    <label class="form-label">Email ou admin</label>
                    <input type="text" class="form-control" id="loginEmail" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Senha</label>
                    <input type="password" class="form-control" id="loginPassword" required>
                </div>
                <div class="alert alert-info">
                    <small><i class="bi bi-info-circle"></i> Acesso admin: admin / admin123</small>
                </div>
                <button type="submit" class="btn btn-primary w-100">
                    <i class="bi bi-box-arrow-in-right"></i> Entrar
                </button>
            </form>
        </div>
        
        <div id="registerForm" style="display:none;">
            <form onsubmit="handleRegister(event)">
                <div class="mb-3">
                    <label class="form-label">Nome Completo</label>
                    <input type="text" class="form-control" id="registerNome" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-control" id="registerEmail" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">CPF</label>
                    <input type="text" class="form-control" id="registerCPF" maxlength="14" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Telefone</label>
                    <input type="text" class="form-control" id="registerTelefone" maxlength="15" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Senha</label>
                    <input type="password" class="form-control" id="registerPassword" minlength="6" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Nível de Acesso</label>
                    <select class="form-select" id="registerAccessLevel">
                        <option value="profissional">Profissional</option>
                        <option value="gestao">Gestão</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary w-100">
                    <i class="bi bi-person-plus"></i> Cadastrar
                </button>
            </form>
        </div>
    </div>
</div>

<!-- Main App -->
<div id="app" style="display:none;">
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" onclick="toggleSidebar()" style="display:none;">
        <i class="bi bi-list"></i>
    </button>
    
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-logo">
            <h1>BIOMA</h1>
            <p>UBERABA v4.0</p>
        </div>
        
        <!-- User Profile -->
        <div class="sidebar-user-profile" id="userProfile">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='40' fill='%237C3AED'/%3E%3Ctext x='50' y='60' text-anchor='middle' font-size='40' fill='white'%3E👤%3C/text%3E%3C/svg%3E" alt="User">
            <div class="user-name" id="userNameDisplay">Carregando...</div>
            <div class="user-role" id="userRoleDisplay">...</div>
            <span class="badge-role" id="userBadgeRole">...</span>
        </div>
        
        <ul class="sidebar-menu" id="sidebarMenu">
            <li><a href="#" onclick="navigateTo('dashboard')" class="active"><i class="bi bi-speedometer2"></i> Dashboard</a></li>
            <li><a href="#" onclick="navigateTo('novo-orcamento')"><i class="bi bi-file-text"></i> Novo Orçamento</a></li>
            <li><a href="#" onclick="navigateTo('consultar-orcamentos')"><i class="bi bi-search"></i> Consultar Orçamentos</a></li>
            <li><a href="#" onclick="navigateTo('contratos')"><i class="bi bi-file-earmark-check"></i> Contratos</a></li>
            <li><a href="#" onclick="navigateTo('relatorios')"><i class="bi bi-graph-up"></i> Relatórios</a></li>
            <li><a href="#" onclick="navigateTo('financeiro')"><i class="bi bi-currency-dollar"></i> Financeiro</a></li>
            <li><a href="#" onclick="navigateTo('estoque')"><i class="bi bi-box"></i> Estoque</a></li>
            <li><a href="#" onclick="navigateTo('agendamento')"><i class="bi bi-calendar-check"></i> Agendamentos</a></li>
            <li><a href="#" onclick="navigateTo('fila')"><i class="bi bi-people"></i> Fila</a></li>
            <li><a href="#" onclick="navigateTo('clientes')"><i class="bi bi-person-lines-fill"></i> Clientes</a></li>
            <li><a href="#" onclick="navigateTo('profissionais')"><i class="bi bi-person-workspace"></i> Profissionais</a></li>
            <li><a href="#" onclick="navigateTo('servicos')"><i class="bi bi-scissors"></i> Serviços</a></li>
            <li><a href="#" onclick="navigateTo('produtos')"><i class="bi bi-basket"></i> Produtos</a></li>
            <li><a href="#" onclick="navigateTo('comunidade')"><i class="bi bi-people-fill"></i> Comunidade</a></li>
            <li><a href="#" onclick="navigateTo('importar')"><i class="bi bi-cloud-upload"></i> Importar</a></li>
            <li><a href="#" onclick="navigateTo('perfil')"><i class="bi bi-person-circle"></i> Perfil</a></li>
            <li id="menuSistema" style="display:none;"><a href="#" onclick="navigateTo('sistema')"><i class="bi bi-gear"></i> Sistema</a></li>
            <li id="menuAuditoria" style="display:none;"><a href="#" onclick="navigateTo('auditoria')"><i class="bi bi-shield-check"></i> Auditoria</a></li>
            <li id="menuConfiguracoes" style="display:none;"><a href="#" onclick="navigateTo('configuracoes')"><i class="bi bi-sliders"></i> Configurações</a></li>
            <li><a href="#" onclick="logout()"><i class="bi bi-box-arrow-left"></i> Sair</a></li>
        </ul>
        
        <div class="theme-toggle">
            <button onclick="toggleTheme()">
                <i class="bi bi-moon-stars-fill"></i> Alternar Tema
            </button>
        </div>
    </aside>
    
    <!-- Main Content -->
    <main class="main-content" id="mainContent">
        <!-- Dashboard Section -->
        <div id="section-dashboard" class="content-section active">
            <div class="page-header">
                <h1><i class="bi bi-speedometer2"></i> Dashboard</h1>
                <div class="d-flex gap-2">
                    <button class="btn btn-sm btn-outline" onclick="refreshDashboard()">
                        <i class="bi bi-arrow-clockwise"></i> Atualizar
                    </button>
                    <span class="badge info" id="notificationBadge" style="position:relative;">
                        <i class="bi bi-bell"></i>
                        <span class="notification-badge" style="display:none;" id="notificationCount">0</span>
                    </span>
                </div>
            </div>
            
            <!-- Stats Cards -->
            <div class="row g-4 mb-4">
                <div class="col-lg-3 col-md-6">
                    <div class="stat-card">
                        <div class="icon"><i class="bi bi-people-fill"></i></div>
                        <h3 id="totalClientes">0</h3>
                        <p>Clientes Cadastrados</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="stat-card">
                        <div class="icon"><i class="bi bi-file-text-fill"></i></div>
                        <h3 id="totalOrcamentos">0</h3>
                        <p>Orçamentos</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="stat-card">
                        <div class="icon"><i class="bi bi-cash-coin"></i></div>
                        <h3 id="totalFaturamento">R$ 0</h3>
                        <p>Faturamento Mensal</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="stat-card">
                        <div class="icon"><i class="bi bi-calendar-check-fill"></i></div>
                        <h3 id="agendamentosHoje">0</h3>
                        <p>Agendamentos Hoje</p>
                    </div>
                </div>
            </div>
            
            <!-- Charts Row -->
            <div class="row g-4">
                <div class="col-lg-8">
                    <div class="card">
                        <div class="card-header">
                            <i class="bi bi-graph-up"></i> Faturamento Mensal
                        </div>
                        <div class="card-body">
                            <canvas id="chartFaturamento" height="100"></canvas>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="card">
                        <div class="card-header">
                            <i class="bi bi-clock-history"></i> Atividade Recente
                        </div>
                        <div class="card-body" id="atividadeRecente">
                            <div class="text-center text-muted">Carregando...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Novo Orçamento Section -->
        <div id="section-novo-orcamento" class="content-section">
            <div class="page-header">
                <h1><i class="bi bi-file-text"></i> Novo Orçamento</h1>
                <button class="btn btn-primary" onclick="iniciarNovoOrcamento()">
                    <i class="bi bi-plus-circle"></i> Criar Orçamento
                </button>
            </div>
            
            <!-- Sub-tabs -->
            <div class="sub-tabs">
                <button class="sub-tab-btn active" onclick="showSubTab('orcamento', 'novo')" data-tab="novo">
                    <i class="bi bi-file-plus"></i> Novo Orçamento
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('orcamento', 'pendentes')" data-tab="pendentes">
                    <i class="bi bi-clock"></i> Pendentes
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('orcamento', 'aprovados')" data-tab="aprovados">
                    <i class="bi bi-check-circle"></i> Aprovados
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('orcamento', 'rejeitados')" data-tab="rejeitados">
                    <i class="bi bi-x-circle"></i> Rejeitados
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('orcamento', 'historico')" data-tab="historico">
                    <i class="bi bi-archive"></i> Histórico
                </button>
            </div>
            
            <!-- Sub-tab: Novo -->
            <div id="orcamento-novo" class="sub-tab-content active">
                <div class="card">
                    <div class="card-header"><i class="bi bi-person"></i> Dados do Cliente</div>
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Selecionar Cliente</label>
                                <select class="form-select" id="selectClienteOrcamento" onchange="preencherDadosCliente()">
                                    <option value="">-- Escolha um cliente --</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Telefone</label>
                                <input type="text" class="form-control" id="telefoneClienteOrcamento" readonly>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card mt-3">
                    <div class="card-header"><i class="bi bi-cart"></i> Itens do Orçamento</div>
                    <div class="card-body">
                        <div class="row g-3 mb-3">
                            <div class="col-md-3">
                                <select class="form-select" id="tipoItemOrcamento">
                                    <option value="servico">Serviço</option>
                                    <option value="produto">Produto</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <select class="form-select" id="selectItemOrcamento">
                                    <option value="">Selecione...</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <input type="number" class="form-control" id="quantidadeItemOrcamento" placeholder="Qtd" value="1">
                            </div>
                            <div class="col-md-2">
                                <input type="text" class="form-control" id="valorItemOrcamento" placeholder="Valor">
                            </div>
                            <div class="col-md-1">
                                <button class="btn btn-success" onclick="adicionarItemOrcamento()">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                        </div>
                        
                        <table id="tabelaItensOrcamento">
                            <thead>
                                <tr>
                                    <th>Item</th>
                                    <th>Tipo</th>
                                    <th>Qtd</th>
                                    <th>Valor Unit.</th>
                                    <th>Subtotal</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="itensOrcamentoBody">
                                <tr>
                                    <td colspan="6" class="text-center text-muted">Nenhum item adicionado</td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr>
                                    <th colspan="4" class="text-end">TOTAL:</th>
                                    <th id="totalOrcamento">R$ 0,00</th>
                                    <th></th>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
                
                <div class="card mt-3">
                    <div class="card-header"><i class="bi bi-info-circle"></i> Informações Adicionais</div>
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Condições de Pagamento</label>
                                <textarea class="form-control" id="condicoesOrcamento" rows="3"></textarea>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Observações</label>
                                <textarea class="form-control" id="observacoesOrcamento" rows="3"></textarea>
                            </div>
                        </div>
                        <div class="row g-3 mt-2">
                            <div class="col-md-4">
                                <label class="form-label">Validade (dias)</label>
                                <input type="number" class="form-control" id="validadeOrcamento" value="30">
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Profissional Responsável</label>
                                <select class="form-select" id="profissionalOrcamento">
                                    <option value="">Selecione...</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Status</label>
                                <select class="form-select" id="statusOrcamento">
                                    <option value="Pendente">Pendente</option>
                                    <option value="Aprovado">Aprovado</option>
                                    <option value="Rejeitado">Rejeitado</option>
                                </select>
                            </div>
                        </div>
                        <div class="mt-3">
                            <button class="btn btn-primary" onclick="salvarOrcamento()">
                                <i class="bi bi-save"></i> Salvar Orçamento
                            </button>
                            <button class="btn btn-secondary" onclick="limparOrcamento()">
                                <i class="bi bi-x-circle"></i> Limpar
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Pendentes -->
            <div id="orcamento-pendentes" class="sub-tab-content">
                <div class="card">
                    <div class="card-header"><i class="bi bi-clock"></i> Orçamentos Pendentes</div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Número</th>
                                        <th>Cliente</th>
                                        <th>Data</th>
                                        <th>Valor</th>
                                        <th>Validade</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="orcamentosPendentesBody">
                                    <tr><td colspan="6" class="text-center"><div class="spinner"></div></td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Aprovados -->
            <div id="orcamento-aprovados" class="sub-tab-content">
                <div class="card">
                    <div class="card-header"><i class="bi bi-check-circle"></i> Orçamentos Aprovados</div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Número</th>
                                        <th>Cliente</th>
                                        <th>Data Aprovação</th>
                                        <th>Valor</th>
                                        <th>Profissional</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="orcamentosAprovadosBody">
                                    <tr><td colspan="6" class="text-center"><div class="spinner"></div></td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Rejeitados -->
            <div id="orcamento-rejeitados" class="sub-tab-content">
                <div class="card">
                    <div class="card-header"><i class="bi bi-x-circle"></i> Orçamentos Rejeitados</div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Número</th>
                                        <th>Cliente</th>
                                        <th>Data</th>
                                        <th>Valor</th>
                                        <th>Motivo</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="orcamentosRejeitadosBody">
                                    <tr><td colspan="6" class="text-center"><div class="spinner"></div></td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Histórico -->
            <div id="orcamento-historico" class="sub-tab-content">
                <div class="card">
                    <div class="card-header"><i class="bi bi-archive"></i> Histórico de Orçamentos</div>
                    <div class="card-body">
                        <div class="mb-3">
                            <input type="text" class="form-control" placeholder="Buscar por número, cliente..." onkeyup="filtrarHistoricoOrcamentos(this.value)">
                        </div>
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Número</th>
                                        <th>Cliente</th>
                                        <th>Data</th>
                                        <th>Valor</th>
                                        <th>Status</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="orcamentosHistoricoBody">
                                    <tr><td colspan="6" class="text-center"><div class="spinner"></div></td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Consultar Orçamentos Section -->
        <div id="section-consultar-orcamentos" class="content-section">
            <div class="page-header">
                <h1><i class="bi bi-search"></i> Consultar Orçamentos</h1>
            </div>
            
            <div class="card">
                <div class="card-header"><i class="bi bi-funnel"></i> Filtros de Busca</div>
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-3">
                            <label class="form-label">Número</label>
                            <input type="text" class="form-control" id="filtroNumero">
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Cliente</label>
                            <select class="form-select" id="filtroCliente">
                                <option value="">Todos</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Status</label>
                            <select class="form-select" id="filtroStatus">
                                <option value="">Todos</option>
                                <option value="Pendente">Pendente</option>
                                <option value="Aprovado">Aprovado</option>
                                <option value="Rejeitado">Rejeitado</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Período</label>
                            <select class="form-select" id="filtroPeriodo">
                                <option value="7">Últimos 7 dias</option>
                                <option value="30">Últimos 30 dias</option>
                                <option value="90">Últimos 90 dias</option>
                                <option value="all">Todos</option>
                            </select>
                        </div>
                    </div>
                    <div class="mt-3">
                        <button class="btn btn-primary" onclick="buscarOrcamentos()">
                            <i class="bi bi-search"></i> Buscar
                        </button>
                        <button class="btn btn-secondary" onclick="limparFiltros()">
                            <i class="bi bi-x-circle"></i> Limpar
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="card mt-3">
                <div class="card-header"><i class="bi bi-list-ul"></i> Resultados</div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Número</th>
                                    <th>Cliente</th>
                                    <th>Data</th>
                                    <th>Valor</th>
                                    <th>Status</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="resultadosOrcamentosBody">
                                <tr><td colspan="6" class="text-center text-muted">Use os filtros acima para buscar orçamentos</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Contratos Section -->
        <div id="section-contratos" class="content-section">
            <div class="page-header">
                <h1><i class="bi bi-file-earmark-check"></i> Contratos</h1>
                <button class="btn btn-primary" onclick="novoContrato()">
                    <i class="bi bi-plus-circle"></i> Novo Contrato
                </button>
            </div>
            
            <div class="card">
                <div class="card-header"><i class="bi bi-file-text"></i> Contratos Ativos</div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Número</th>
                                    <th>Cliente</th>
                                    <th>Tipo</th>
                                    <th>Valor</th>
                                    <th>Vigência</th>
                                    <th>Status</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="contratosBody">
                                <tr><td colspan="7" class="text-center"><div class="spinner"></div></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Financeiro Section -->
        <div id="section-financeiro" class="content-section">
            <div class="page-header">
                <h1><i class="bi bi-currency-dollar"></i> Financeiro</h1>
            </div>
            
            <!-- Sub-tabs -->
            <div class="sub-tabs">
                <button class="sub-tab-btn active" onclick="showSubTab('financeiro', 'resumo')">
                    <i class="bi bi-graph-up"></i> Resumo
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('financeiro', 'receitas')">
                    <i class="bi bi-arrow-up-circle"></i> Receitas
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('financeiro', 'despesas')">
                    <i class="bi bi-arrow-down-circle"></i> Despesas
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('financeiro', 'comissoes')">
                    <i class="bi bi-percent"></i> Comissões
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('financeiro', 'fluxo-caixa')">
                    <i class="bi bi-cash-stack"></i> Fluxo de Caixa
                </button>
            </div>
            
            <!-- Sub-tab: Resumo -->
            <div id="financeiro-resumo" class="sub-tab-content active">
                <div class="row g-4 mb-4">
                    <div class="col-lg-3 col-md-6">
                        <div class="financeiro-card">
                            <div class="financeiro-card-header">
                                <span class="financeiro-card-title">Receitas</span>
                                <i class="bi bi-arrow-up-circle text-success"></i>
                            </div>
                            <div class="financeiro-stat-value positive" id="financeiroReceitas">R$ 0,00</div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="financeiro-card">
                            <div class="financeiro-card-header">
                                <span class="financeiro-card-title">Despesas</span>
                                <i class="bi bi-arrow-down-circle text-danger"></i>
                            </div>
                            <div class="financeiro-stat-value negative" id="financeiroDespesas">R$ 0,00</div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="financeiro-card">
                            <div class="financeiro-card-header">
                                <span class="financeiro-card-title">Comissões</span>
                                <i class="bi bi-percent text-warning"></i>
                            </div>
                            <div class="financeiro-stat-value" id="financeiroComissoes">R$ 0,00</div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="financeiro-card">
                            <div class="financeiro-card-header">
                                <span class="financeiro-card-title">Lucro Líquido</span>
                                <i class="bi bi-graph-up-arrow text-info"></i>
                            </div>
                            <div class="financeiro-stat-value positive" id="financeiroLucro">R$ 0,00</div>
                        </div>
                    </div>
                </div>
                
                <div class="row g-4">
                    <div class="col-lg-8">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-bar-chart"></i> Evolução Mensal</div>
                            <div class="card-body">
                                <canvas id="chartFinanceiroMensal" height="100"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-pie-chart"></i> Despesas por Categoria</div>
                            <div class="card-body">
                                <canvas id="chartDespesasCategoria" height="200"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card mt-4">
                    <div class="card-header"><i class="bi bi-calculator"></i> Indicadores</div>
                    <div class="card-body">
                        <div class="financeiro-stat">
                            <span class="financeiro-stat-label">Margem de Lucro</span>
                            <span class="financeiro-stat-value" id="margemLucro">0%</span>
                        </div>
                        <div class="financeiro-stat">
                            <span class="financeiro-stat-label">Ticket Médio</span>
                            <span class="financeiro-stat-value" id="ticketMedio">R$ 0,00</span>
                        </div>
                        <div class="financeiro-stat">
                            <span class="financeiro-stat-label">Número de Vendas</span>
                            <span class="financeiro-stat-value" id="numeroVendas">0</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Receitas -->
            <div id="financeiro-receitas" class="sub-tab-content">
                <div class="card">
                    <div class="card-header">
                        <i class="bi bi-arrow-up-circle"></i> Receitas
                        <button class="btn btn-sm btn-success float-end" onclick="adicionarReceita()">
                            <i class="bi bi-plus"></i> Nova Receita
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Data</th>
                                        <th>Descrição</th>
                                        <th>Cliente</th>
                                        <th>Valor</th>
                                        <th>Forma Pagamento</th>
                                        <th>Status</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="receitasBody">
                                    <tr><td colspan="7" class="text-center"><div class="spinner"></div></td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Despesas -->
            <div id="financeiro-despesas" class="sub-tab-content">
                <div class="card">
                    <div class="card-header">
                        <i class="bi bi-arrow-down-circle"></i> Despesas
                        <button class="btn btn-sm btn-danger float-end" onclick="adicionarDespesa()">
                            <i class="bi bi-plus"></i> Nova Despesa
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="mb-3 row g-3">
                            <div class="col-md-4">
                                <select class="form-select" id="filtroCategoriaDespesa">
                                    <option value="">Todas as Categorias</option>
                                    <option value="Aluguel">Aluguel</option>
                                    <option value="Salários">Salários</option>
                                    <option value="Produtos">Produtos</option>
                                    <option value="Energia">Energia</option>
                                    <option value="Água">Água</option>
                                    <option value="Internet">Internet</option>
                                    <option value="Marketing">Marketing</option>
                                    <option value="Outros">Outros</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <input type="month" class="form-control" id="filtroMesDespesa">
                            </div>
                            <div class="col-md-2">
                                <button class="btn btn-primary" onclick="filtrarDespesas()">
                                    <i class="bi bi-funnel"></i> Filtrar
                                </button>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Data</th>
                                        <th>Descrição</th>
                                        <th>Categoria</th>
                                        <th>Valor</th>
                                        <th>Forma Pagamento</th>
                                        <th>Comprovante</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="despesasBody">
                                    <tr><td colspan="7" class="text-center"><div class="spinner"></div></td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Comissões -->
            <div id="financeiro-comissoes" class="sub-tab-content">
                <div class="card">
                    <div class="card-header"><i class="bi bi-percent"></i> Comissões</div>
                    <div class="card-body">
                        <div class="mb-3 row g-3">
                            <div class="col-md-4">
                                <select class="form-select" id="filtroProfissionalComissao">
                                    <option value="">Todos os Profissionais</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <input type="month" class="form-control" id="filtroMesComissao">
                            </div>
                            <div class="col-md-3">
                                <select class="form-select" id="filtroStatusComissao">
                                    <option value="">Todos</option>
                                    <option value="Pendente">Pendente</option>
                                    <option value="Pago">Pago</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <button class="btn btn-primary" onclick="filtrarComissoes()">
                                    <i class="bi bi-funnel"></i> Filtrar
                                </button>
                            </div>
                        </div>
                        
                        <div class="row g-3 mb-3">
                            <div class="col-md-4">
                                <div class="financeiro-card">
                                    <div class="financeiro-stat-label">Total Pendente</div>
                                    <div class="financeiro-stat-value negative" id="totalComissoesPendente">R$ 0,00</div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="financeiro-card">
                                    <div class="financeiro-stat-label">Total Pago</div>
                                    <div class="financeiro-stat-value positive" id="totalComissoesPago">R$ 0,00</div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="financeiro-card">
                                    <div class="financeiro-stat-label">Total Geral</div>
                                    <div class="financeiro-stat-value" id="totalComissoesGeral">R$ 0,00</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Data</th>
                                        <th>Profissional</th>
                                        <th>Orçamento</th>
                                        <th>Valor Base</th>
                                        <th>%</th>
                                        <th>Comissão</th>
                                        <th>Status</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="comissoesBody">
                                    <tr><td colspan="8" class="text-center"><div class="spinner"></div></td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Fluxo de Caixa -->
            <div id="financeiro-fluxo-caixa" class="sub-tab-content">
                <div class="card">
                    <div class="card-header"><i class="bi bi-cash-stack"></i> Fluxo de Caixa</div>
                    <div class="card-body">
                        <div class="row g-3 mb-3">
                            <div class="col-md-4">
                                <label class="form-label">Período</label>
                                <select class="form-select" id="periodoFluxoCaixa" onchange="atualizarFluxoCaixa()">
                                    <option value="dia">Hoje</option>
                                    <option value="semana">Esta Semana</option>
                                    <option value="mes" selected>Este Mês</option>
                                    <option value="trimestre">Este Trimestre</option>
                                    <option value="ano">Este Ano</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Data</th>
                                        <th>Tipo</th>
                                        <th>Descrição</th>
                                        <th>Entrada</th>
                                        <th>Saída</th>
                                        <th>Saldo</th>
                                    </tr>
                                </thead>
                                <tbody id="fluxoCaixaBody">
                                    <tr><td colspan="6" class="text-center"><div class="spinner"></div></td></tr>
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <th colspan="3">TOTAL</th>
                                        <th id="totalEntradas" class="text-success">R$ 0,00</th>
                                        <th id="totalSaidas" class="text-danger">R$ 0,00</th>
                                        <th id="saldoFinal">R$ 0,00</th>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Relatórios Section -->
        <div id="section-relatorios" class="content-section">
            <div class="page-header">
                <h1><i class="bi bi-graph-up"></i> Relatórios</h1>
            </div>
            
            <!-- Sub-tabs -->
            <div class="sub-tabs">
                <button class="sub-tab-btn active" onclick="showSubTab('relatorios', 'resumo')">
                    <i class="bi bi-grid-3x3-gap"></i> Resumo
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('relatorios', 'mapa-calor')">
                    <i class="bi bi-map"></i> Mapa de Calor
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('relatorios', 'top-clientes')">
                    <i class="bi bi-trophy"></i> Top Clientes
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('relatorios', 'top-produtos')">
                    <i class="bi bi-star"></i> Top Produtos
                </button>
            </div>
            
            <!-- Sub-tab: Resumo -->
            <div id="relatorios-resumo" class="sub-tab-content active">
                <div class="row g-4 mb-4">
                    <div class="col-lg-3 col-md-6">
                        <div class="stat-card">
                            <div class="icon"><i class="bi bi-cart-check"></i></div>
                            <h3 id="relatorioTotalVendas">0</h3>
                            <p>Vendas no Mês</p>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="stat-card">
                            <div class="icon"><i class="bi bi-graph-up-arrow"></i></div>
                            <h3 id="relatorioCrescimento">0%</h3>
                            <p>Crescimento</p>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="stat-card">
                            <div class="icon"><i class="bi bi-star-fill"></i></div>
                            <h3 id="relatorioNPS">0</h3>
                            <p>NPS Score</p>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="stat-card">
                            <div class="icon"><i class="bi bi-arrow-repeat"></i></div>
                            <h3 id="relatorioRetorno">0%</h3>
                            <p>Taxa de Retorno</p>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header"><i class="bi bi-bar-chart"></i> Vendas por Mês</div>
                    <div class="card-body">
                        <canvas id="chartVendasMensal" height="100"></canvas>
                    </div>
                </div>
                
                <div class="row g-4 mt-3">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-clock"></i> Horários Mais Movimentados</div>
                            <div class="card-body">
                                <canvas id="chartHorarios" height="150"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-person-check"></i> Profissionais Mais Produtivos</div>
                            <div class="card-body">
                                <div id="topProfissionaisLista"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Mapa de Calor -->
            <div id="relatorios-mapa-calor" class="sub-tab-content">
                <div class="card">
                    <div class="card-header">
                        <i class="bi bi-map"></i> Mapa de Calor - Atendimentos
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <select class="form-select" id="filtroMapaCalorMes" onchange="atualizarMapaCalor()">
                                <option value="atual">Mês Atual</option>
                                <option value="anterior">Mês Anterior</option>
                                <option value="trimestre">Último Trimestre</option>
                            </select>
                        </div>
                        <div id="mapaCalorContainer">
                            <div class="text-center">
                                <div class="spinner"></div>
                            </div>
                        </div>
                        <div class="mt-3">
                            <div class="d-flex justify-content-center gap-3">
                                <span><span style="display:inline-block;width:20px;height:20px;background:#DCFCE7;border-radius:4px;"></span> Baixo</span>
                                <span><span style="display:inline-block;width:20px;height:20px;background:#86EFAC;border-radius:4px;"></span> Médio</span>
                                <span><span style="display:inline-block;width:20px;height:20px;background:#4ADE80;border-radius:4px;"></span> Alto</span>
                                <span><span style="display:inline-block;width:20px;height:20px;background:#22C55E;border-radius:4px;"></span> Muito Alto</span>
                                <span><span style="display:inline-block;width:20px;height:20px;background:#16A34A;border-radius:4px;"></span> Pico</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Top Clientes -->
            <div id="relatorios-top-clientes" class="sub-tab-content">
                <div class="card">
                    <div class="card-header"><i class="bi bi-trophy"></i> Top 10 Clientes</div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Posição</th>
                                        <th>Cliente</th>
                                        <th>Total Faturado</th>
                                        <th>Nº Compras</th>
                                        <th>Ticket Médio</th>
                                        <th>Última Compra</th>
                                    </tr>
                                </thead>
                                <tbody id="topClientesBody">
                                    <tr><td colspan="6" class="text-center"><div class="spinner"></div></td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Top Produtos -->
            <div id="relatorios-top-produtos" class="sub-tab-content">
                <div class="card">
                    <div class="card-header"><i class="bi bi-star"></i> Top 10 Produtos</div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Posição</th>
                                        <th>Produto</th>
                                        <th>Quantidade Vendida</th>
                                        <th>Faturamento</th>
                                        <th>Margem</th>
                                        <th>Tendência</th>
                                    </tr>
                                </thead>
                                <tbody id="topProdutosBody">
                                    <tr><td colspan="6" class="text-center"><div class="spinner"></div></td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Estoque Section -->
        <div id="section-estoque" class="content-section">
            <div class="page-header">
                <h1><i class="bi bi-box"></i> Controle de Estoque</h1>
                <button class="btn btn-primary" onclick="adicionarMovimentacao()">
                    <i class="bi bi-plus-circle"></i> Nova Movimentação
                </button>
            </div>
            
            <!-- Sub-tabs -->
            <div class="sub-tabs">
                <button class="sub-tab-btn active" onclick="showSubTab('estoque', 'visao-geral')">
                    <i class="bi bi-grid-3x3-gap"></i> Visão Geral
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('estoque', 'movimentacoes')">
                    <i class="bi bi-arrow-left-right"></i> Movimentações
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('estoque', 'alertas')">
                    <i class="bi bi-exclamation-triangle"></i> Alertas
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('estoque', 'inventario')">
                    <i class="bi bi-clipboard-check"></i> Inventário
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('estoque', 'relatorio')">
                    <i class="bi bi-file-text"></i> Relatório
                </button>
            </div>
            
            <!-- Sub-tab: Visão Geral -->
            <div id="estoque-visao-geral" class="sub-tab-content active">
                <div class="row g-4 mb-4">
                    <div class="col-lg-3 col-md-6">
                        <div class="stat-card">
                            <div class="icon" style="background:linear-gradient(135deg,#10B981,#059669);">
                                <i class="bi bi-check-circle"></i>
                            </div>
                            <h3 id="estoqueNormal">0</h3>
                            <p>Estoque Normal</p>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="stat-card">
                            <div class="icon" style="background:linear-gradient(135deg,#F59E0B,#D97706);">
                                <i class="bi bi-exclamation-circle"></i>
                            </div>
                            <h3 id="estoqueAtencao">0</h3>
                            <p>Atenção</p>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="stat-card">
                            <div class="icon" style="background:linear-gradient(135deg,#EF4444,#DC2626);">
                                <i class="bi bi-x-circle"></i>
                            </div>
                            <h3 id="estoqueCritico">0</h3>
                            <p>Crítico</p>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="stat-card">
                            <div class="icon" style="background:linear-gradient(135deg,#8B5CF6,#7C3AED);">
                                <i class="bi bi-currency-dollar"></i>
                            </div>
                            <h3 id="valorTotalEstoque">R$ 0</h3>
                            <p>Valor Total</p>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <i class="bi bi-box"></i> Produtos em Estoque
                        <div class="float-end">
                            <input type="text" class="form-control form-control-sm" placeholder="Buscar produto..." onkeyup="filtrarEstoque(this.value)">
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Produto</th>
                                        <th>Marca</th>
                                        <th>Categoria</th>
                                        <th>Estoque Atual</th>
                                        <th>Estoque Mínimo</th>
                                        <th>Valor Unit.</th>
                                        <th>Status</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="estoqueProdutosBody">
                                    <tr><td colspan="8" class="text-center"><div class="spinner"></div></td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Movimentações -->
            <div id="estoque-movimentacoes" class="sub-tab-content">
                <div class="card">
                    <div class="card-header">
                        <i class="bi bi-arrow-left-right"></i> Histórico de Movimentações
                        <button class="btn btn-sm btn-success float-end" onclick="registrarEntrada()">
                            <i class="bi bi-arrow-up"></i> Entrada
                        </button>
                        <button class="btn btn-sm btn-danger float-end me-2" onclick="registrarSaida()">
                            <i class="bi bi-arrow-down"></i> Saída
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Data/Hora</th>
                                        <th>Produto</th>
                                        <th>Tipo</th>
                                        <th>Quantidade</th>
                                        <th>Estoque Anterior</th>
                                        <th>Estoque Atual</th>
                                        <th>Responsável</th>
                                        <th>Observações</th>
                                    </tr>
                                </thead>
                                <tbody id="movimentacoesEstoqueBody">
                                    <tr><td colspan="8" class="text-center"><div class="spinner"></div></td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Alertas -->
            <div id="estoque-alertas" class="sub-tab-content">
                <div class="card">
                    <div class="card-header">
                        <i class="bi bi-exclamation-triangle"></i> Produtos com Estoque Baixo
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Produto</th>
                                        <th>Marca</th>
                                        <th>Estoque Atual</th>
                                        <th>Estoque Mínimo</th>
                                        <th>Diferença</th>
                                        <th>Status</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="estoqueBaixoBody">
                                    <tr><td colspan="7" class="text-center"><div class="spinner"></div></td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div class="card mt-3">
                    <div class="card-header">
                        <i class="bi bi-clock-history"></i> Últimas Movimentações
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Data</th>
                                        <th>Hora</th>
                                        <th>Produto</th>
                                        <th>Tipo</th>
                                        <th>Quantidade</th>
                                        <th>Responsável</th>
                                    </tr>
                                </thead>
                                <tbody id="estoqueUltimasMovimentacoesBody">
                                    <tr><td colspan="6" class="text-center text-muted">Nenhuma movimentação recente</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Inventário -->
            <div id="estoque-inventario" class="sub-tab-content">
                <div class="card">
                    <div class="card-header">
                        <i class="bi bi-clipboard-check"></i> Realizar Inventário
                    </div>
                    <div class="card-body">
                        <div class="alert alert-info">
                            <i class="bi bi-info-circle"></i> Use esta função para conferir e ajustar o estoque físico
                        </div>
                        <button class="btn btn-primary mb-3" onclick="iniciarInventario()">
                            <i class="bi bi-play-circle"></i> Iniciar Inventário
                        </button>
                        <div id="inventarioContainer"></div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Relatório -->
            <div id="estoque-relatorio" class="sub-tab-content">
                <div class="card">
                    <div class="card-header">
                        <i class="bi bi-file-text"></i> Relatório de Estoque
                    </div>
                    <div class="card-body">
                        <div class="row g-3 mb-3">
                            <div class="col-md-3">
                                <label class="form-label">Tipo de Relatório</label>
                                <select class="form-select" id="tipoRelatorioEstoque">
                                    <option value="geral">Posição Geral</option>
                                    <option value="movimentacoes">Movimentações</option>
                                    <option value="criticos">Produtos Críticos</option>
                                    <option value="valorizado">Estoque Valorizado</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Data Início</label>
                                <input type="date" class="form-control" id="dataInicioRelatorioEstoque">
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Data Fim</label>
                                <input type="date" class="form-control" id="dataFimRelatorioEstoque">
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">&nbsp;</label>
                                <button class="btn btn-primary w-100" onclick="gerarRelatorioEstoque()">
                                    <i class="bi bi-file-earmark-text"></i> Gerar
                                </button>
                            </div>
                        </div>
                        <div id="relatorioEstoqueResultado"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Agendamento Section -->
        <div id="section-agendamento" class="content-section">
            <div class="page-header">
                <h1><i class="bi bi-calendar-check"></i> Agendamentos</h1>
                <button class="btn btn-primary" onclick="novoAgendamento()">
                    <i class="bi bi-plus-circle"></i> Novo Agendamento
                </button>
            </div>
            
            <!-- Sub-tabs -->
            <div class="sub-tabs">
                <button class="sub-tab-btn active" onclick="showSubTab('agendamento', 'calendario')">
                    <i class="bi bi-calendar3"></i> Calendário
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('agendamento', 'lista')">
                    <i class="bi bi-list-ul"></i> Lista
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('agendamento', 'profissionais')">
                    <i class="bi bi-person-badge"></i> Por Profissional
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('agendamento', 'confirmacoes')">
                    <i class="bi bi-check2-square"></i> Confirmações
                </button>
            </div>
            
            <!-- Sub-tab: Calendário -->
            <div id="agendamento-calendario" class="sub-tab-content active">
                <div class="card">
                    <div class="card-header">
                        <i class="bi bi-calendar3"></i> Calendário de Agendamentos
                        <div class="float-end">
                            <button class="btn btn-sm btn-outline" onclick="calendarioAnterior()">
                                <i class="bi bi-chevron-left"></i>
                            </button>
                            <button class="btn btn-sm btn-outline" onclick="calendarioHoje()">Hoje</button>
                            <button class="btn btn-sm btn-outline" onclick="calendarioProximo()">
                                <i class="bi bi-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div id="calendarioContainer">
                            <!-- Calendário será renderizado aqui -->
                            <div class="text-center">
                                <div class="spinner"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Lista -->
            <div id="agendamento-lista" class="sub-tab-content">
                <div class="card">
                    <div class="card-header">
                        <i class="bi bi-list-ul"></i> Lista de Agendamentos
                        <div class="float-end">
                            <input type="date" class="form-control form-control-sm" id="filtroDataAgendamento" onchange="filtrarAgendamentos()">
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Data</th>
                                        <th>Hora</th>
                                        <th>Cliente</th>
                                        <th>Serviço</th>
                                        <th>Profissional</th>
                                        <th>Status</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="agendamentosListaBody">
                                    <tr><td colspan="7" class="text-center"><div class="spinner"></div></td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Por Profissional -->
            <div id="agendamento-profissionais" class="sub-tab-content">
                <div class="card">
                    <div class="card-header">
                        <i class="bi bi-person-badge"></i> Agenda por Profissional
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <select class="form-select" id="selectProfissionalAgenda" onchange="carregarAgendaProfissional()">
                                <option value="">Selecione um profissional</option>
                            </select>
                        </div>
                        <div id="agendaProfissionalContainer">
                            <p class="text-center text-muted">Selecione um profissional para ver sua agenda</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Confirmações -->
            <div id="agendamento-confirmacoes" class="sub-tab-content">
                <div class="card">
                    <div class="card-header">
                        <i class="bi bi-check2-square"></i> Confirmações Pendentes
                    </div>
                    <div class="card-body">
                        <div class="alert alert-warning">
                            <i class="bi bi-exclamation-triangle"></i> Agendamentos que precisam de confirmação
                        </div>
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Data/Hora</th>
                                        <th>Cliente</th>
                                        <th>Telefone</th>
                                        <th>Serviço</th>
                                        <th>Profissional</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="confirmacoesBody">
                                    <tr><td colspan="6" class="text-center"><div class="spinner"></div></td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Fila Section -->
        <div id="section-fila" class="content-section">
            <div class="page-header">
                <h1><i class="bi bi-people"></i> Fila de Atendimento</h1>
                <button class="btn btn-primary" onclick="atualizarFila()">
                    <i class="bi bi-arrow-clockwise"></i> Atualizar
                </button>
            </div>
            
            <div class="row g-4 mb-4">
                <div class="col-lg-3 col-md-6">
                    <div class="stat-card">
                        <div class="icon"><i class="bi bi-people-fill"></i></div>
                        <h3 id="totalFila">0</h3>
                        <p>Na Fila</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="stat-card">
                        <div class="icon" style="background:linear-gradient(135deg,#10B981,#059669);">
                            <i class="bi bi-person-check"></i>
                        </div>
                        <h3 id="emAtendimento">0</h3>
                        <p>Em Atendimento</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="stat-card">
                        <div class="icon" style="background:linear-gradient(135deg,#F59E0B,#D97706);">
                            <i class="bi bi-clock"></i>
                        </div>
                        <h3 id="tempoMedioEspera">0 min</h3>
                        <p>Tempo Médio</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="stat-card">
                        <div class="icon" style="background:linear-gradient(135deg,#3B82F6,#2563EB);">
                            <i class="bi bi-person-plus"></i>
                        </div>
                        <h3 id="proximoAtendimento">-</h3>
                        <p>Próximo</p>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <i class="bi bi-list-ol"></i> Fila de Atendimento
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Posição</th>
                                    <th>Cliente</th>
                                    <th>Telefone</th>
                                    <th>Horário</th>
                                    <th>Profissional</th>
                                    <th>Status</th>
                                    <th>Tempo Espera</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="filaBody">
                                <tr><td colspan="8" class="text-center"><div class="spinner"></div></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Clientes Section -->
        <div id="section-clientes" class="content-section">
            <div class="page-header">
                <h1><i class="bi bi-person-lines-fill"></i> Clientes</h1>
                <button class="btn btn-primary" onclick="novoCliente()">
                    <i class="bi bi-person-plus"></i> Novo Cliente
                </button>
            </div>
            
            <!-- Sub-tabs -->
            <div class="sub-tabs">
                <button class="sub-tab-btn active" onclick="showSubTab('clientes', 'lista')">
                    <i class="bi bi-list-ul"></i> Lista de Clientes
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('clientes', 'anamnese')">
                    <i class="bi bi-clipboard-pulse"></i> Anamneses
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('clientes', 'prontuarios')">
                    <i class="bi bi-file-medical"></i> Prontuários
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('clientes', 'faturamento')">
                    <i class="bi bi-cash-coin"></i> Faturamento
                </button>
            </div>
            
            <!-- Sub-tab: Lista -->
            <div id="clientes-lista" class="sub-tab-content active">
                <div class="card">
                    <div class="card-header">
                        <i class="bi bi-people"></i> Base de Clientes
                        <div class="float-end">
                            <input type="text" class="form-control form-control-sm" placeholder="Buscar cliente..." onkeyup="filtrarClientes(this.value)">
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Nome</th>
                                        <th>CPF</th>
                                        <th>Telefone</th>
                                        <th>Email</th>
                                        <th>Total Faturado</th>
                                        <th>Última Visita</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="clientesBody">
                                    <tr><td colspan="7" class="text-center"><div class="spinner"></div></td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Anamnese -->
            <div id="clientes-anamnese" class="sub-tab-content">
                <div class="card">
                    <div class="card-header"><i class="bi bi-clipboard-pulse"></i> Ficha de Anamnese</div>
                    <div class="card-body">
                        <div class="mb-3">
                            <select class="form-select" id="selectClienteAnamnese" onchange="carregarAnamnese()">
                                <option value="">Selecione um cliente</option>
                            </select>
                        </div>
                        <div id="anamneseContainer">
                            <p class="text-center text-muted">Selecione um cliente para ver/criar anamnese</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Prontuários -->
            <div id="clientes-prontuarios" class="sub-tab-content">
                <div class="card">
                    <div class="card-header"><i class="bi bi-file-medical"></i> Prontuários</div>
                    <div class="card-body">
                        <div class="mb-3">
                            <select class="form-select" id="selectClienteProntuario" onchange="carregarProntuarios()">
                                <option value="">Selecione um cliente</option>
                            </select>
                        </div>
                        <div id="prontuariosContainer">
                            <p class="text-center text-muted">Selecione um cliente para ver prontuários</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Faturamento -->
            <div id="clientes-faturamento" class="sub-tab-content">
                <div class="card">
                    <div class="card-header"><i class="bi bi-cash-coin"></i> Faturamento por Cliente</div>
                    <div class="card-body">
                        <div class="mb-3">
                            <select class="form-select" id="selectClienteFaturamento" onchange="carregarFaturamentoCliente()">
                                <option value="">Selecione um cliente</option>
                            </select>
                        </div>
                        <div id="faturamentoClienteContainer">
                            <p class="text-center text-muted">Selecione um cliente para ver faturamento</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Profissionais Section -->
        <div id="section-profissionais" class="content-section">
            <div class="page-header">
                <h1><i class="bi bi-person-workspace"></i> Profissionais</h1>
                <button class="btn btn-primary" onclick="novoProfissional()">
                    <i class="bi bi-person-plus"></i> Novo Profissional
                </button>
            </div>
            
            <!-- Sub-tabs -->
            <div class="sub-tabs">
                <button class="sub-tab-btn active" onclick="showSubTab('profissionais', 'lista')">
                    <i class="bi bi-people-fill"></i> Lista
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('profissionais', 'comissoes')">
                    <i class="bi bi-cash-stack"></i> Comissões
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('profissionais', 'estatisticas')">
                    <i class="bi bi-graph-up"></i> Estatísticas
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('profissionais', 'assistentes')">
                    <i class="bi bi-person-badge"></i> Assistentes
                </button>
            </div>
            
            <!-- Sub-tab: Lista -->
            <div id="profissionais-lista" class="sub-tab-content active">
                <div class="card">
                    <div class="card-header"><i class="bi bi-people-fill"></i> Equipe BIOMA</div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Foto</th>
                                        <th>Nome</th>
                                        <th>Especialidade</th>
                                        <th>Comissão</th>
                                        <th>Assistentes</th>
                                        <th>Status</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="profissionaisBody">
                                    <tr><td colspan="7" class="text-center"><div class="spinner"></div></td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Comissões -->
            <div id="profissionais-comissoes" class="sub-tab-content">
                <div class="card">
                    <div class="card-header"><i class="bi bi-cash-stack"></i> Comissões Detalhadas</div>
                    <div class="card-body">
                        <div id="comissoesProfissionaisContainer">
                            <p class="text-center text-muted">Carregando...</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Estatísticas -->
            <div id="profissionais-estatisticas" class="sub-tab-content">
                <div class="card">
                    <div class="card-header"><i class="bi bi-graph-up"></i> Performance da Equipe</div>
                    <div class="card-body">
                        <canvas id="chartProfissionaisPerformance" height="100"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Assistentes -->
            <div id="profissionais-assistentes" class="sub-tab-content">
                <div class="card">
                    <div class="card-header">
                        <i class="bi bi-person-badge"></i> Assistentes
                        <button class="btn btn-sm btn-primary float-end" onclick="novoAssistente()">
                            <i class="bi bi-plus"></i> Novo Assistente
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Nome</th>
                                        <th>Profissional</th>
                                        <th>Telefone</th>
                                        <th>Status</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="assistentesBody">
                                    <tr><td colspan="5" class="text-center"><div class="spinner"></div></td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Serviços Section -->
        <div id="section-servicos" class="content-section">
            <div class="page-header">
                <h1><i class="bi bi-scissors"></i> Serviços</h1>
                <button class="btn btn-primary" onclick="novoServico()">
                    <i class="bi bi-plus-circle"></i> Novo Serviço
                </button>
            </div>
            
            <!-- Sub-tabs -->
            <div class="sub-tabs">
                <button class="sub-tab-btn active" onclick="showSubTab('servicos', 'lista')">
                    <i class="bi bi-list-ul"></i> Lista
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('servicos', 'categorias')">
                    <i class="bi bi-tags"></i> Categorias
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('servicos', 'pacotes')">
                    <i class="bi bi-box2"></i> Pacotes
                </button>
            </div>
            
            <!-- Sub-tab: Lista -->
            <div id="servicos-lista" class="sub-tab-content active">
                <div class="card">
                    <div class="card-header"><i class="bi bi-scissors"></i> Catálogo de Serviços</div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Nome</th>
                                        <th>Categoria</th>
                                        <th>Duração</th>
                                        <th>Preço</th>
                                        <th>Comissão</th>
                                        <th>Status</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="servicosBody">
                                    <tr><td colspan="7" class="text-center"><div class="spinner"></div></td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Categorias -->
            <div id="servicos-categorias" class="sub-tab-content">
                <div class="card">
                    <div class="card-header"><i class="bi bi-tags"></i> Categorias de Serviços</div>
                    <div class="card-body">
                        <p class="text-center">Em desenvolvimento</p>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Pacotes -->
            <div id="servicos-pacotes" class="sub-tab-content">
                <div class="card">
                    <div class="card-header"><i class="bi bi-box2"></i> Pacotes Promocionais</div>
                    <div class="card-body">
                        <p class="text-center">Em desenvolvimento</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Produtos Section -->
        <div id="section-produtos" class="content-section">
            <div class="page-header">
                <h1><i class="bi bi-basket"></i> Produtos</h1>
                <button class="btn btn-primary" onclick="novoProduto()">
                    <i class="bi bi-plus-circle"></i> Novo Produto
                </button>
            </div>
            
            <!-- Sub-tabs -->
            <div class="sub-tabs">
                <button class="sub-tab-btn active" onclick="showSubTab('produtos', 'lista')">
                    <i class="bi bi-list-ul"></i> Lista
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('produtos', 'categorias')">
                    <i class="bi bi-tags"></i> Categorias
                </button>
                <button class="sub-tab-btn" onclick="showSubTab('produtos', 'fornecedores')">
                    <i class="bi bi-truck"></i> Fornecedores
                </button>
            </div>
            
            <!-- Sub-tab: Lista -->
            <div id="produtos-lista" class="sub-tab-content active">
                <div class="card">
                    <div class="card-header"><i class="bi bi-basket"></i> Catálogo de Produtos</div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Nome</th>
                                        <th>Marca</th>
                                        <th>Categoria</th>
                                        <th>Preço</th>
                                        <th>Estoque</th>
                                        <th>Status</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="produtosBody">
                                    <tr><td colspan="7" class="text-center"><div class="spinner"></div></td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Categorias -->
            <div id="produtos-categorias" class="sub-tab-content">
                <div class="card">
                    <div class="card-header"><i class="bi bi-tags"></i> Categorias de Produtos</div>
                    <div class="card-body">
                        <p class="text-center">Em desenvolvimento</p>
                    </div>
                </div>
            </div>
            
            <!-- Sub-tab: Fornecedores -->
            <div id="produtos-fornecedores" class="sub-tab-content">
                <div class="card">
                    <div class="card-header"><i class="bi bi-truck"></i> Fornecedores</div>
                    <div class="card-body">
                        <p class="text-center">Em desenvolvimento</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Comunidade Section -->
        <div id="section-comunidade" class="content-section">
            <div class="community-container">
                <div class="community-header">
                    <h2><i class="bi bi-stars"></i> Comunidade BIOMA</h2>
                    <p>Conecte-se, aprenda e cresça com a rede BIOMA</p>
                    <div class="community-stats">
                        <div class="community-stat-item">
                            <i class="bi bi-people-fill"></i>
                            <span>500+ Membros</span>
                        </div>
                        <div class="community-stat-item">
                            <i class="bi bi-chat-dots"></i>
                            <span>1.2k Discussões</span>
                        </div>
                        <div class="community-stat-item">
                            <i class="bi bi-trophy"></i>
                            <span>50+ Cases de Sucesso</span>
                        </div>
                    </div>
                </div>
                
                <div class="community-grid">
                    <div class="community-card">
                        <h5><i class="bi bi-megaphone"></i> Avisos e Novidades</h5>
                        <p>Fique por dentro das últimas atualizações, lançamentos e comunicados oficiais da rede BIOMA.</p>
                        <button class="btn btn-outline" onclick="verAvisos()">Ver Avisos</button>
                    </div>
                    
                    <div class="community-card">
                        <h5><i class="bi bi-book"></i> Base de Conhecimento</h5>
                        <p>Acesse tutoriais, guias e documentação completa para aproveitar ao máximo o sistema.</p>
                        <button class="btn btn-outline" onclick="abrirBaseConhecimento()">Acessar</button>
                    </div>
                    
                    <div class="community-card">
                        <h5><i class="bi bi-calendar-event"></i> Eventos e Workshops</h5>
                        <p>Participe de treinamentos exclusivos, workshops e eventos da comunidade BIOMA.</p>
                        <button class="btn btn-outline" onclick="verEventos()">Ver Agenda</button>
                    </div>
                    
                    <div class="community-card">
                        <h5><i class="bi bi-award"></i> Programa de Pontos</h5>
                        <p>Acumule pontos por indicações, vendas e participação. Troque por benefícios exclusivos.</p>
                        <button class="btn btn-outline" onclick="verPontos()">Meus Pontos</button>
                    </div>
                    
                    <div class="community-card">
                        <h5><i class="bi bi-lightbulb"></i> Sugestões e Ideias</h5>
                        <p>Compartilhe suas ideias para melhorar o sistema e vote nas sugestões da comunidade.</p>
                        <button class="btn btn-outline" onclick="enviarSugestao()">Enviar Ideia</button>
                    </div>
                    
                    <div class="community-card">
                        <h5><i class="bi bi-headset"></i> Suporte Premium</h5>
                        <p>Acesso direto ao suporte técnico especializado com atendimento prioritário.</p>
                        <button class="btn btn-outline" onclick="abrirSuporte()">Contatar Suporte</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Importar Section -->
        <div id="section-importar" class="content-section">
            <div class="page-header">
                <h1><i class="bi bi-cloud-upload"></i> Importar Dados</h1>
            </div>
            
            <div class="alert alert-info">
                <i class="bi bi-info-circle"></i> Importe dados em massa através de arquivos CSV ou Excel
            </div>
            
            <div class="row g-4">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header"><i class="bi bi-people"></i> Importar Clientes</div>
                        <div class="card-body text-center">
                            <div class="mb-3">
                                <i class="bi bi-file-earmark-arrow-up" style="font-size:4rem;color:var(--primary);"></i>
                            </div>
                            <input type="file" id="importClientes" accept=".csv,.xlsx" style="display:none;">
                            <button class="btn btn-primary" onclick="document.getElementById('importClientes').click()">
                                <i class="bi bi-upload"></i> Selecionar Arquivo
                            </button>
                            <button class="btn btn-outline" onclick="baixarTemplateClientes()">
                                <i class="bi bi-download"></i> Baixar Template
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header"><i class="bi bi-basket"></i> Importar Produtos</div>
                        <div class="card-body text-center">
                            <div class="mb-3">
                                <i class="bi bi-file-earmark-arrow-up" style="font-size:4rem;color:var(--primary);"></i>
                            </div>
                            <input type="file" id="importProdutos" accept=".csv,.xlsx" style="display:none;">
                            <button class="btn btn-primary" onclick="document.getElementById('importProdutos').click()">
                                <i class="bi bi-upload"></i> Selecionar Arquivo
                            </button>
                            <button class="btn btn-outline" onclick="baixarTemplateProdutos()">
                                <i class="bi bi-download"></i> Baixar Template
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Perfil Section -->
        <div id="section-perfil" class="content-section">
            <div class="page-header">
                <h1><i class="bi bi-person-circle"></i> Meu Perfil</h1>
            </div>
            
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body text-center">
                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='40' fill='%237C3AED'/%3E%3Ctext x='50' y='60' text-anchor='middle' font-size='40' fill='white'%3E👤%3C/text%3E%3C/svg%3E" 
                                 alt="Foto" style="width:150px;height:150px;border-radius:50%;margin-bottom:20px;">
                            <h4 id="perfilNome">Carregando...</h4>
                            <p class="text-muted" id="perfilEmail">...</p>
                            <span class="badge-role" id="perfilNivel">...</span>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-8">
                    <div class="card">
                        <div class="card-header"><i class="bi bi-person-lines-fill"></i> Informações Pessoais</div>
                        <div class="card-body">
                            <form id="formPerfil">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label">Nome Completo</label>
                                        <input type="text" class="form-control" id="perfilNomeCompleto">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">CPF</label>
                                        <input type="text" class="form-control" id="perfilCPF" readonly>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Telefone</label>
                                        <input type="text" class="form-control" id="perfilTelefone">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Data de Nascimento</label>
                                        <input type="date" class="form-control" id="perfilDataNascimento">
                                    </div>
                                    <div class="col-12">
                                        <label class="form-label">Endereço</label>
                                        <input type="text" class="form-control" id="perfilEndereco">
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="bi bi-save"></i> Salvar Alterações
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    <div class="card mt-3">
                        <div class="card-header"><i class="bi bi-key"></i> Alterar Senha</div>
                        <div class="card-body">
                            <form id="formAlterarSenha">
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <label class="form-label">Senha Atual</label>
                                        <input type="password" class="form-control" id="senhaAtual" required>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">Nova Senha</label>
                                        <input type="password" class="form-control" id="senhaNova" required>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">Confirmar Nova Senha</label>
                                        <input type="password" class="form-control" id="senhaConfirmar" required>
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <button type="submit" class="btn btn-warning">
                                        <i class="bi bi-shield-lock"></i> Alterar Senha
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Sistema Section (Admin Only) -->
        <div id="section-sistema" class="content-section">
            <div class="page-header">
                <h1><i class="bi bi-gear"></i> Sistema</h1>
            </div>
            
            <div class="card">
                <div class="card-header"><i class="bi bi-people"></i> Gerenciar Usuários</div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Email</th>
                                    <th>Nível</th>
                                    <th>Status</th>
                                    <th>Último Login</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="usuariosBody">
                                <tr><td colspan="6" class="text-center"><div class="spinner"></div></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Auditoria Section (Admin Only) -->
        <div id="section-auditoria" class="content-section">
            <div class="page-header">
                <h1><i class="bi bi-shield-check"></i> Auditoria</h1>
            </div>
            
            <div class="card">
                <div class="card-header"><i class="bi bi-clock-history"></i> Logs do Sistema</div>
                <div class="card-body">
                    <div class="mb-3 row g-3">
                        <div class="col-md-3">
                            <input type="date" class="form-control" id="auditoriaDataInicio">
                        </div>
                        <div class="col-md-3">
                            <input type="date" class="form-control" id="auditoriaDataFim">
                        </div>
                        <div class="col-md-3">
                            <select class="form-select" id="auditoriaUsuario">
                                <option value="">Todos os Usuários</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-primary" onclick="buscarAuditoria()">
                                <i class="bi bi-search"></i> Buscar
                            </button>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Data/Hora</th>
                                    <th>Usuário</th>
                                    <th>Ação</th>
                                    <th>Detalhes</th>
                                    <th>IP</th>
                                </tr>
                            </thead>
                            <tbody id="auditoriaBody">
                                <tr><td colspan="5" class="text-center"><div class="spinner"></div></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Configurações Section (Admin Only) -->
        <div id="section-configuracoes" class="content-section">
            <div class="page-header">
                <h1><i class="bi bi-sliders"></i> Configurações</h1>
            </div>
            
            <div class="card">
                <div class="card-header"><i class="bi bi-building"></i> Dados da Empresa</div>
                <div class="card-body">
                    <form id="formConfiguracoes">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Nome da Empresa</label>
                                <input type="text" class="form-control" id="configNomeEmpresa">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">CNPJ</label>
                                <input type="text" class="form-control" id="configCNPJ">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Telefone</label>
                                <input type="text" class="form-control" id="configTelefone">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Email</label>
                                <input type="email" class="form-control" id="configEmail">
                            </div>
                            <div class="col-12">
                                <label class="form-label">Endereço</label>
                                <input type="text" class="form-control" id="configEndereco">
                            </div>
                            <div class="col-12">
                                <label class="form-label">Logo da Empresa</label>
                                <input type="file" class="form-control" id="configLogo" accept="image/*">
                            </div>
                        </div>
                        <div class="mt-3">
                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-save"></i> Salvar Configurações
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </main>
</div>

<!-- Modal Container -->
<div id="modalContainer"></div>

<!-- JavaScript Principal -->
<script>
// Configuração da API
const API_URL = window.location.origin + '/api';
let currentUser = null;
let currentSection = 'dashboard';
let charts = {};

// API Helper
const API = {
    async get(endpoint) {
        const res = await fetch(API_URL + endpoint, {
            credentials: 'include',
            headers: {'Content-Type': 'application/json'}
        });
        return res.json();
    },
    
    async post(endpoint, data) {
        const res = await fetch(API_URL + endpoint, {
            method: 'POST',
            credentials: 'include',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(data)
        });
        return res.json();
    },
    
    async put(endpoint, data) {
        const res = await fetch(API_URL + endpoint, {
            method: 'PUT',
            credentials: 'include',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(data)
        });
        return res.json();
    },
    
    async delete(endpoint) {
        const res = await fetch(API_URL + endpoint, {
            method: 'DELETE',
            credentials: 'include'
        });
        return res.json();
    }
};

// Toggle Auth Tab
function toggleAuthTab(tab) {
    const loginForm = document.getElementById('loginForm');
    const registerForm = document.getElementById('registerForm');
    const buttons = document.querySelectorAll('.nav-link');
    
    buttons.forEach(btn => btn.classList.remove('active'));
    
    if (tab === 'login') {
        loginForm.style.display = 'block';
        registerForm.style.display = 'none';
        buttons[0].classList.add('active');
    } else {
        loginForm.style.display = 'none';
        registerForm.style.display = 'block';
        buttons[1].classList.add('active');
    }
}

// Handle Login
async function handleLogin(event) {
    event.preventDefault();
    const email = document.getElementById('loginEmail').value;
    const password = document.getElementById('loginPassword').value;
    
    try {
        const res = await API.post('/login', {email, password});
        if (res.success) {
            Swal.fire('Sucesso!', res.message, 'success');
            setTimeout(() => location.reload(), 1500);
        } else {
            Swal.fire('Erro', res.message, 'error');
        }
    } catch (error) {
        Swal.fire('Erro', 'Erro ao fazer login', 'error');
    }
}

// Handle Register
async function handleRegister(event) {
    event.preventDefault();
    const data = {
        nome: document.getElementById('registerNome').value,
        email: document.getElementById('registerEmail').value,
        cpf: document.getElementById('registerCPF').value,
        telefone: document.getElementById('registerTelefone').value,
        password: document.getElementById('registerPassword').value,
        access_level: document.getElementById('registerAccessLevel').value
    };
    
    try {
        const res = await API.post('/register', data);
        if (res.success) {
            Swal.fire('Sucesso!', res.message, 'success');
            toggleAuthTab('login');
        } else {
            Swal.fire('Erro', res.message, 'error');
        }
    } catch (error) {
        Swal.fire('Erro', 'Erro ao cadastrar', 'error');
    }
}

// Initialize App
async function initApp(user) {
    currentUser = user;
    document.getElementById('authScreen').style.display = 'none';
    document.getElementById('app').style.display = 'block';
    
    // Update user profile display
    document.getElementById('userNameDisplay').textContent = user.nome;
    document.getElementById('userRoleDisplay').textContent = user.access_level || 'Profissional';
    
    const badgeRole = document.getElementById('userBadgeRole');
    badgeRole.textContent = user.access_level?.toUpperCase() || 'PROFISSIONAL';
    badgeRole.className = `badge-role ${user.access_level || 'profissional'}`;
    
    // Show admin menus if applicable
    if (user.access_level === 'admin') {
        document.getElementById('menuSistema').style.display = 'block';
        document.getElementById('menuAuditoria').style.display = 'block';
        document.getElementById('menuConfiguracoes').style.display = 'block';
    } else if (user.access_level === 'gestao') {
        document.getElementById('menuSistema').style.display = 'block';
    }
    
    // Load dashboard
    await loadDashboard();
    
    // Check for mobile
    if (window.innerWidth < 768) {
        document.querySelector('.mobile-menu-toggle').style.display = 'block';
    }
}

// Navigation
function navigateTo(section) {
    // Hide all sections
    document.querySelectorAll('.content-section').forEach(s => {
        s.classList.remove('active');
    });
    
    // Show selected section
    const sectionEl = document.getElementById(`section-${section}`);
    if (sectionEl) {
        sectionEl.classList.add('active');
        currentSection = section;
    }
    
    // Update menu
    document.querySelectorAll('.sidebar-menu a').forEach(a => {
        a.classList.remove('active');
    });
    event.target.closest('a').classList.add('active');
    
    // Load section data
    loadSectionData(section);
    
    // Close mobile menu if open
    if (window.innerWidth < 768) {
        document.getElementById('sidebar').classList.remove('active');
    }
}

// Show Sub-tab
function showSubTab(section, tab) {
    // Get the current section container
    const sectionContainer = document.getElementById(`section-${section}`);
    if (!sectionContainer) return;
    
    // Hide all sub-tab contents in this section
    sectionContainer.querySelectorAll('.sub-tab-content').forEach(content => {
        content.classList.remove('active');
    });
    
    // Remove active class from all sub-tab buttons
    sectionContainer.querySelectorAll('.sub-tab-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    
    // Show selected sub-tab content
    const tabContent = document.getElementById(`${section}-${tab}`);
    if (tabContent) {
        tabContent.classList.add('active');
    }
    
    // Add active class to clicked button
    const clickedBtn = sectionContainer.querySelector(`[data-tab="${tab}"]`) || 
                      sectionContainer.querySelector(`[onclick*="'${tab}'"]`);
    if (clickedBtn) {
        clickedBtn.classList.add('active');
    }
    
    // Load sub-tab specific data
    loadSubTabData(section, tab);
}

// Load Section Data
async function loadSectionData(section) {
    switch(section) {
        case 'dashboard':
            await loadDashboard();
            break;
        case 'novo-orcamento':
            await loadNovoOrcamento();
            break;
        case 'consultar-orcamentos':
            await loadConsultarOrcamentos();
            break;
        case 'financeiro':
            await loadFinanceiro();
            break;
        case 'estoque':
            await loadEstoque();
            break;
        case 'agendamento':
            await loadAgendamentos();
            break;
        case 'fila':
            await loadFila();
            break;
        case 'clientes':
            await loadClientes();
            break;
        case 'profissionais':
            await loadProfissionais();
            break;
        case 'relatorios':
            await loadRelatorios();
            break;
        case 'perfil':
            await loadPerfil();
            break;
        case 'sistema':
            await loadSistema();
            break;
        case 'auditoria':
            await loadAuditoria();
            break;
        case 'configuracoes':
            await loadConfiguracoes();
            break;
    }
}

// Load Sub-tab Data
async function loadSubTabData(section, tab) {
    try {
        const endpoint = `/${section}/${tab}`;
        const data = await API.get(endpoint + '?from_estoque=true');
        
        // Process data based on section and tab
        console.log(`Loading ${section}/${tab}`, data);
    } catch (error) {
        console.error(`Error loading ${section}/${tab}:`, error);
    }
}

// Load Dashboard
async function loadDashboard() {
    try {
        // Load stats
        const stats = await API.get('/dashboard/stats');
        document.getElementById('totalClientes').textContent = stats.clientes || 0;
        document.getElementById('totalOrcamentos').textContent = stats.orcamentos || 0;
        document.getElementById('totalFaturamento').textContent = `R$ ${stats.faturamento?.toFixed(2) || '0,00'}`;
        document.getElementById('agendamentosHoje').textContent = stats.agendamentos || 0;
        
        // Load chart data
        const chartData = await API.get('/dashboard/chart');
        updateChart('chartFaturamento', chartData);
        
        // Load recent activity
        const activity = await API.get('/dashboard/activity');
        updateActivity(activity);
        
    } catch (error) {
        console.error('Error loading dashboard:', error);
    }
}

// Logout
async function logout() {
    const result = await Swal.fire({
        title: 'Confirmar Saída',
        text: 'Deseja realmente sair?',
        icon: 'question',
        showCancelButton: true,
        confirmButtonText: 'Sim, sair',
        cancelButtonText: 'Cancelar'
    });
    
    if (result.isConfirmed) {
        await API.post('/logout', {});
        location.reload();
    }
}

// Toggle Sidebar (Mobile)
function toggleSidebar() {
    document.getElementById('sidebar').classList.toggle('active');
}

// Toggle Theme
function toggleTheme() {
    const html = document.documentElement;
    const currentTheme = html.getAttribute('data-theme');
    const newTheme = currentTheme === 'light' ? 'dark' : 'light';
    html.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
}

// Initialize on Load
(async function boot() {
    // Apply saved theme
    const savedTheme = localStorage.getItem('theme') || 'light';
    document.documentElement.setAttribute('data-theme', savedTheme);
    
    try {
        const cu = await API.get('/current-user');
        if (cu.success) {
            initApp(cu.user);
        } else {
            document.getElementById('authScreen').style.display = 'flex';
            document.getElementById('app').style.display = 'none';
        }
    } catch (error) {
        console.error('Boot error:', error);
        document.getElementById('authScreen').style.display = 'flex';
        document.getElementById('app').style.display = 'none';
    }
})();

// Mask inputs
document.addEventListener('DOMContentLoaded', () => {
    // CPF Mask
    document.querySelectorAll('input[id*="CPF"]').forEach(input => {
        input.addEventListener('input', (e) => {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length <= 11) {
                value = value.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');
            }
            e.target.value = value;
        });
    });
    
    // Phone Mask
    document.querySelectorAll('input[id*="Telefone"], input[id*="telefone"]').forEach(input => {
        input.addEventListener('input', (e) => {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length <= 11) {
                value = value.replace(/(\d{2})(\d{5})(\d{4})/, '($1) $2-$3');
            }
            e.target.value = value;
        });
    });
});
</script>

</body>
</html>